# BachelorThesis_ARM_TrustZone_Authentication_Protocol

This repository contains the implementation of a **challenge-response authentication protocol** developed as part of my Bachelor's thesis. The project demonstrates how ARM TrustZone can be utilized to manage critical security operations on an embedded system, specifically using an STM32 microcontroller. The TrustZone provides a hardware-based separation between the secure and non-secure worlds, ensuring that sensitive cryptographic operations, such as key handling and session token management, are performed securely.

## Table of Contents
- [BachelorThesis\_ARM\_TrustZone\_Authentication\_Protocol](#bachelorthesis_arm_trustzone_authentication_protocol)
  - [Table of Contents](#table-of-contents)
  - [Project Overview](#project-overview)
    - [External Terminal](#external-terminal)
  - [Execution Instructions](#execution-instructions)
  - [Technologies Used](#technologies-used)

## Project Overview

The **challenge-response authentication protocol** implemented in this project aims to protect communication between a terminal and a board that executes critical operations in the ARM TrustZone. The external terminal, acting as a server, initiates a connection request to the board. Before the board can accept the request and exchange any sensitive data, it verifies the terminal's identity using **RSA signatures**.

Once authenticated, the board generates and securely transmits a session token to the terminal, ensuring that the data is encrypted and handled in the secure world provided by the ARM TrustZone. All cryptographic operations, including RSA key generation and token encryption, are isolated from the non-secure world, providing a robust layer of security.


### External Terminal

The `External_Terminal` folder contains a Python script that simulates a **server**. This script:
- Initiates a connection to the board.
- Receives the **challenge** generated by the board.
- Signs the challenge using RSA and sends it back to the board for authentication.
- Once authenticated, receives a **session token**, encrypted by the board.

## Execution Instructions

To run the project, follow these steps:

1. **Flash the Program to the STM32 Board**:
   - Use **STM32CubeIDE** or your preferred development environment to flash the program located in the `BoardCode/` folder to your STM32 device.
   
2. **Run the External Terminal Script**:
   - Navigate to the `External_Terminal/` folder and run the Python script:
     ```bash
     python terminal_sim.py
     ```
   - Make sure to **start the script a few seconds after flashing** the program to the board to allow the initialization of the TrustZone environment.

3. **Observe the Interaction**:
   - The terminal script will first attempt to authenticate with the board by signing the received challenge using RSA.
   - Upon successful authentication, the board will generate a session token and send it to the terminal. The token is encrypted and must be decrypted by the terminal to complete the process.

## Technologies Used

- **ARM TrustZone**: Used for isolating critical security operations within the secure world of the STM32 microcontroller.
- **STM32U5 (STM32U575ZI)**: The microcontroller used for the project, running the embedded code.
- **STM32CubeIDE**: IDE used for flashing the board and debugging the embedded application.
- **WolfSSL**: Cryptographic library providing RSA signature and encryption functionality.
- **Python**: Used for the terminal-side script that simulates the external server in the authentication protocol.


